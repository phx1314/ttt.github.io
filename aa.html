<div id="imgPreview">
    <div id="prompt3">
        <div id="imgSpan">
            点击上传
        </div>
        <input type="file" id="file" class="filepath" onchange="changepic()" accept="image/*">
        <button id="imgSpan" type="button" onclick="clearpic()">重新上传</button>
    </div>
    @*此处用js自动插入图片标签<img src="" id="img3" />*@
</div>

<script>//图片显示
     function changepic() {
    var reads = new FileReader();
    f = document.getElementById('file').files[0];
　　 savePic(f);                    --》》 保存图片，上传服务器
    reads.readAsDataURL(f);
    reads.onload = function (e) {
        var y = document.createElement('img');
        y.id = "img3";
        y.src = this.result;
        $("#imgPreview").append(y);
    };
};
function savePic(file) {
    var formData = new FormData();
    formData.append('file', file);

    $.ajax({
                url: "https://www.aaaa.com/fileupload",
                type: "post",
                data: formData,
                contentType: false,
                processData: false,
                success: function (data) {
                    var picId = JSON.parse(data).atts[0].id;   -->> 解析服务器返回的json字符串，取出其中的Id
                    alert("返回值id为："+picId);
                },
                error: function (data) {
                    alert("上传失败");
                }
      });
}
</script>

 